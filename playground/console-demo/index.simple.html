<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>è¿œç¨‹æ§åˆ¶å°æ¼”ç¤º - XAgi Monitor</title>

    <!-- ä½¿ç”¨ CDN åŠ è½½ React -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

    <!-- Babel è½¬æ¢å™¨ -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        color: #1a1a1a;
      }

      .console-demo-container {
        background: rgba(255, 255, 255, 0.95);
        border-radius: 16px;
        padding: 2rem;
        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        margin: 2rem auto;
        max-width: 1200px;
        color: #1a1a1a;
      }

      .demo-header {
        margin-bottom: 2rem;
        text-align: center;
      }

      .demo-header h1 {
        color: #10b981;
        font-size: 2rem;
        margin-bottom: 0.5rem;
      }

      .demo-header p {
        color: #6b7280;
        font-size: 1.1rem;
      }

      .connection-status {
        background: #f0fdf4;
        border: 1px solid #bbf7d0;
        border-radius: 8px;
        padding: 1rem;
        margin-bottom: 2rem;
        color: #166534;
      }

      .connection-status.disconnected {
        background: #fef2f2;
        border-color: #fecaca;
        color: #dc2626;
      }

      .status-indicator {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background: #22c55e;
        animation: pulse 2s infinite;
        display: inline-block;
        margin-right: 0.5rem;
      }

      .status-indicator.disconnected {
        background: #ef4444;
        animation: none;
      }

      @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.5; }
        100% { opacity: 1; }
      }

      .console-categories {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 2rem;
        margin-top: 2rem;
      }

      .console-category {
        background: #f9fafb;
        border: 1px solid #e5e7eb;
        border-radius: 12px;
        padding: 1.5rem;
      }

      .console-category h3 {
        color: #374151;
        margin-bottom: 1rem;
      }

      .console-category .description {
        color: #6b7280;
        font-size: 0.9rem;
        margin-bottom: 1rem;
      }

      .console-buttons {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
      }

      .console-btn {
        background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        color: white;
        border: none;
        padding: 0.75rem 1rem;
        border-radius: 8px;
        cursor: pointer;
        font-size: 0.9rem;
        transition: all 0.3s ease;
      }

      .console-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 15px -3px rgba(16, 185, 129, 0.3);
      }

      .console-btn.warn {
        background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
      }

      .console-btn.error {
        background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
      }

      .demo-instructions {
        background: #eff6ff;
        border: 1px solid #bfdbfe;
        border-radius: 8px;
        padding: 1rem;
        margin-top: 2rem;
        color: #1e40af;
      }

      .demo-instructions h4 {
        margin-top: 0;
        color: #1e40af;
      }

      .demo-instructions ul {
        margin: 0;
        padding-left: 1.5rem;
      }

      .demo-instructions li {
        margin-bottom: 0.5rem;
      }

      .server-url {
        background: #1e293b;
        color: #22d3ee;
        padding: 0.5rem;
        border-radius: 6px;
        font-family: 'Courier New', monospace;
        font-weight: bold;
        display: inline-block;
        margin: 0.5rem 0;
      }

      .log-count {
        font-weight: bold;
        color: #10b981;
      }

      @media (max-width: 768px) {
        .console-demo-container {
          margin: 1rem;
          padding: 1rem;
        }

        .console-categories {
          grid-template-columns: 1fr;
          gap: 1rem;
        }
      }
    </style>
  </head>
  <body>
    <div id="root"></div>

    <script type="text/babel">
      const { useState, useEffect } = React;

      function App() {
        const [connectionStatus, setConnectionStatus] = useState('disconnected');
        const [logCount, setLogCount] = useState(0);

        useEffect(() => {
          // æ¨¡æ‹Ÿè¿æ¥çŠ¶æ€æ£€æµ‹
          const checkConnection = () => {
            const isConnected = window.__XAGI_CONSOLE_CONNECTED__ || false;
            setConnectionStatus(isConnected ? 'connected' : 'disconnected');
          };

          const interval = setInterval(checkConnection, 1000);
          return () => clearInterval(interval);
        }, []);

        // åŸºç¡€æ—¥å¿—æµ‹è¯•
        const testBasicLogs = () => {
          console.log('ğŸ“ è¿™æ˜¯ä¸€ä¸ªåŸºç¡€æ—¥å¿—');
          console.info('â„¹ï¸ è¿™æ˜¯ä¸€ä¸ªä¿¡æ¯æ—¥å¿—');
          console.warn('âš ï¸ è¿™æ˜¯ä¸€ä¸ªè­¦å‘Šæ—¥å¿—');
          console.error('âŒ è¿™æ˜¯ä¸€ä¸ªé”™è¯¯æ—¥å¿—');
          console.debug('ğŸ› è¿™æ˜¯ä¸€ä¸ªè°ƒè¯•æ—¥å¿—');

          console.table([
            { name: 'å¼ ä¸‰', age: 25, city: 'åŒ—äº¬' },
            { name: 'æå››', age: 30, city: 'ä¸Šæµ·' }
          ]);
          setLogCount(prev => prev + 6);
        };

        // å¯¹è±¡æ—¥å¿—æµ‹è¯•
        const testObjectLogs = () => {
          const user = {
            id: 1,
            name: 'å¼ ä¸‰',
            email: 'zhangsan@example.com',
            profile: {
              age: 25,
              city: 'åŒ—äº¬',
              hobbies: ['ç¼–ç¨‹', 'é˜…è¯»', 'è¿åŠ¨']
            }
          };

          console.log('ç”¨æˆ·ä¿¡æ¯:', user);
          console.table(user.profile);
          setLogCount(prev => prev + 2);
        };

        // æ•°ç»„æ—¥å¿—æµ‹è¯•
        const testArrayLogs = () => {
          const products = [
            { id: 1, name: 'ç¬”è®°æœ¬ç”µè„‘', price: 5999, category: 'ç”µå­äº§å“' },
            { id: 2, name: 'æ— çº¿é¼ æ ‡', price: 99, category: 'é…ä»¶' },
            { id: 3, name: 'æœºæ¢°é”®ç›˜', price: 299, category: 'é…ä»¶' }
          ];

          console.log('äº§å“åˆ—è¡¨:', products);
          console.table(products);
          setLogCount(prev => prev + 2);
        };

        // æ€§èƒ½æ—¥å¿—æµ‹è¯•
        const testPerformanceLogs = () => {
          console.time('æ€§èƒ½æµ‹è¯•');
          let sum = 0;
          for (let i = 0; i < 100000; i++) {
            sum += Math.random();
          }
          console.timeEnd('æ€§èƒ½æµ‹è¯•');
          console.log('è®¡ç®—ç»“æœ:', sum);
          setLogCount(prev => prev + 2);
        };

        // ç½‘ç»œè¯·æ±‚æ—¥å¿—
        const testNetworkLogs = async () => {
          console.log('ğŸŒ å¼€å§‹ç½‘ç»œè¯·æ±‚æµ‹è¯•');

          try {
            console.log('å‘é€ GET è¯·æ±‚...');
            const response = await fetch('https://jsonplaceholder.typicode.com/posts/1');
            const data = await response.json();
            console.log('è¯·æ±‚æˆåŠŸ:', data);
          } catch (error) {
            console.error('è¯·æ±‚å¤±è´¥:', error);
          }

          setLogCount(prev => prev + 3);
        };

        // é”™è¯¯å’Œå¼‚å¸¸æ—¥å¿—
        const testErrorLogs = () => {
          try {
            // æ•…æ„è§¦å‘é”™è¯¯
            JSON.parse('{"invalid": json}');
          } catch (error) {
            console.error('JSON è§£æé”™è¯¯:', error);
          }

          // åˆ›å»ºè‡ªå®šä¹‰é”™è¯¯
          const customError = new Error('è¿™æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰é”™è¯¯');
          customError.stack = 'è‡ªå®šä¹‰é”™è¯¯å †æ ˆä¿¡æ¯';
          console.error('è‡ªå®šä¹‰é”™è¯¯:', customError);

          setLogCount(prev => prev + 2);
        };

        // å®æ—¶æ•°æ®æµæ—¥å¿—
        const testRealTimeLogs = () => {
          let count = 0;
          const interval = setInterval(() => {
            count++;
            console.log(`ğŸ“Š å®æ—¶æ•°æ® #${count}/10:`, {
              timestamp: new Date().toISOString(),
              value: Math.random() * 100,
              status: count % 2 === 0 ? 'active' : 'idle'
            });

            if (count >= 10) {
              clearInterval(interval);
              console.log('ğŸ å®æ—¶æ•°æ®æµç»“æŸ');
            }
          }, 500);

          setLogCount(prev => prev + 11);
        };

        // æ‰¹é‡æ—¥å¿—å‹åŠ›æµ‹è¯•
        const testBatchLogs = () => {
          console.log('ğŸš€ å¼€å§‹æ‰¹é‡æ—¥å¿—å‹åŠ›æµ‹è¯•...');

          const startTime = Date.now();
          for (let i = 0; i < 100; i++) {  // å‡å°‘åˆ°100æ¡é¿å…æµè§ˆå™¨å¡é¡¿
            console.log(`æ‰¹é‡æ—¥å¿— ${i + 1}/100:`, {
              id: i,
              data: Math.random().toString(36),
              timestamp: Date.now()
            });
          }

          const endTime = Date.now();
          console.log(`âœ… æ‰¹é‡æ—¥å¿—å®Œæˆï¼Œè€—æ—¶: ${endTime - startTime}ms`);
          setLogCount(prev => prev + 101);
        };

        return (
          <div className="console-demo-container">
            <div className="demo-header">
              <h1>ğŸ“¡ è¿œç¨‹æ§åˆ¶å°æ¼”ç¤º</h1>
              <p>å®æ—¶ç›‘æ§å’Œè½¬å‘æµè§ˆå™¨æ§åˆ¶å°æ—¥å¿—åˆ°è¿œç¨‹æœåŠ¡å™¨</p>
            </div>

            <div className={`connection-status ${connectionStatus === 'disconnected' ? 'disconnected' : ''}`}>
              <h3>
                <span className={`status-indicator ${connectionStatus === 'disconnected' ? 'disconnected' : ''}`}></span>
                WebSocket è¿æ¥çŠ¶æ€: {connectionStatus === 'connected' ? 'å·²è¿æ¥' : 'æœªè¿æ¥'}
              </h3>
              <p>
                {connectionStatus === 'connected'
                  ? 'æ­£åœ¨å®æ—¶è½¬å‘æ§åˆ¶å°æ—¥å¿—åˆ°è¿œç¨‹æœåŠ¡å™¨'
                  : 'è¯·ç­‰å¾… WebSocket è¿æ¥å»ºç«‹...'}
              </p>
              {connectionStatus === 'connected' && (
                <p><strong>å·²å‘é€æ—¥å¿—æ•°é‡:</strong> <span className="log-count">{logCount}</span></p>
              )}
            </div>

            <div className="console-categories">
              <div className="console-category">
                <h3>ğŸ“ åŸºç¡€æ—¥å¿—æµ‹è¯•</h3>
                <p className="description">æµ‹è¯•ä¸åŒçº§åˆ«çš„æ§åˆ¶å°è¾“å‡º</p>
                <div className="console-buttons">
                  <button className="console-btn" onClick={testBasicLogs}>
                    åŸºç¡€æ—¥å¿— (log/info/warn/error/debug)
                  </button>
                  <button className="console-btn" onClick={testObjectLogs}>
                    å¯¹è±¡æ—¥å¿— (Object)
                  </button>
                  <button className="console-btn" onClick={testArrayLogs}>
                    æ•°ç»„æ—¥å¿— (Array/Table)
                  </button>
                </div>
              </div>

              <div className="console-category">
                <h3>âš¡ æ€§èƒ½å’Œè°ƒè¯•</h3>
                <p className="description">æ€§èƒ½ç›‘æ§å’Œè°ƒè¯•ç›¸å…³æ—¥å¿—</p>
                <div className="console-buttons">
                  <button className="console-btn" onClick={testPerformanceLogs}>
                    æ€§èƒ½æµ‹è¯• (time/timeEnd)
                  </button>
                  <button className="console-btn warn" onClick={testErrorLogs}>
                    é”™è¯¯æ—¥å¿— (try/catch)
                  </button>
                  <button className="console-btn" onClick={testNetworkLogs}>
                    ç½‘ç»œè¯·æ±‚æ—¥å¿—
                  </button>
                </div>
              </div>

              <div className="console-category">
                <h3>ğŸ”„ å®æ—¶å’Œæ‰¹é‡</h3>
                <p className="description">å®æ—¶æ•°æ®æµå’Œå¤§é‡æ—¥å¿—æµ‹è¯•</p>
                <div className="console-buttons">
                  <button className="console-btn" onClick={testRealTimeLogs}>
                    å®æ—¶æ•°æ®æµ (å®šæ—¶å™¨)
                  </button>
                  <button className="console-btn error" onClick={testBatchLogs}>
                    æ‰¹é‡å‹åŠ›æµ‹è¯• (100æ¡)
                  </button>
                </div>
              </div>
            </div>

            <div className="demo-instructions">
              <h4>ğŸ¯ æ¼”ç¤ºåŠŸèƒ½è¯´æ˜</h4>
              <ul>
                <li><strong>å¯åŠ¨å¼€å‘æœåŠ¡å™¨</strong>: è¿è¡Œ <code>pnpm dev</code></li>
                <li><strong>æ‰“å¼€è¿œç¨‹æ§åˆ¶å°</strong>: åœ¨å¦ä¸€ä¸ªç»ˆç«¯ä¸­è®¿é—® WebSocket æœåŠ¡å™¨</li>
                <li><strong>è¿æ¥åœ°å€</strong>: <div className="server-url">ws://localhost:3001</div></li>
                <li><strong>æµ‹è¯•æ—¥å¿—</strong>: ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®ç”Ÿæˆå„ç§ç±»å‹çš„æ—¥å¿—</li>
                <li><strong>è§‚å¯Ÿè½¬å‘</strong>: åœ¨è¿œç¨‹æ§åˆ¶å°æŸ¥çœ‹å®æ—¶è½¬å‘çš„æ—¥å¿—</li>
              </ul>
              <p><strong>ç‰¹æ€§</strong>: å®æ—¶è½¬å‘ã€æ—¥å¿—æŒä¹…åŒ–ã€å¤šå®¢æˆ·ç«¯è¿æ¥ã€æ—¥å¿—è¿‡æ»¤ã€å†å²è®°å½•</p>
            </div>
          </div>
        );
      }

      ReactDOM.render(<App />, document.getElementById('root'));
    </script>
  </body>
</html>